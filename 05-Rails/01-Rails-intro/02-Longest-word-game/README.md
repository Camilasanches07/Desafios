## Background & Objectives

Time to re-implement your "Longest-word game" with a cool web-interface!

There is no `rake` here, and do not create your Rails app in `fullstack-challenges`.

```bash
cd ~/code/<user.github_nickname>
rails new rails-longest-word-game
cd rails-longest-word-game
git init
git add .
git commit -m "rails new"
hub create
git push origin master
```

## Specs

Let's think about the UI for our game. What do we need?

1. A page to display the game settings (random letters), with a form for the user to type a word. A button to submit this form.
2. A page receiving this form, computing the user score and displaying it.

### 1 - Routing & Controller

Using the right command line command, generate the `GamesController` with two actions `new` and `score`. The `new` action will be used to display a new random grid and a form. The form will be submitted (with `POST`) to the `score` action.

Open you `routes.rb` file and tweak the routes automatically generated by the previous command. In the end, `rails routes` should return something like this:

```bash
Prefix Verb URI Pattern      Controller#Action
   new GET  /new(.:format)   games#new
 score POST /score(.:format) games#score
```

### 2 - Generating a new game

Have a look at your old Ruby code. How did you generate an `Array` of random letters? In the `new` action of the `GamesController`, create a new `@letters` instance variable storing these random letters. Then display it in the view. You should get something like this:

![](https://raw.githubusercontent.com/lewagon/fullstack-images/master/rails/longest-word-game/new_game.png)

### 3 - Submitting a word

We need to add a form below the letters so that the user can fill a suggestion and submit it.

Go ahead and add a `<form />` to your view. It should `POST` to the `/score` action in the `GamesController`. Remember about the `:authenticity_token` (see Lecture slides)!

![](https://raw.githubusercontent.com/lewagon/fullstack-images/master/rails/longest-word-game/new_game.png)

### 4 - At the other side of the form

Let's check that the form is being correctly set by inspecting what we get in `params`. They are two ways, the first one is to add `raise` in your controller code:

```ruby
# app/controllers/games_controller.rb

# [...]
  def score
    raise
  end
```

Go to the `/new` page, fill a word and submit the form. You should get a **RuntimeError** from Rails, with a console at the bottom. You can type `params` to inspect what got sent:

![](https://raw.githubusercontent.com/lewagon/fullstack-images/master/rails/longest-word-game/raise.png)

The cleaner way is to add the `pry-rails` gem (you can get rid of the default `byebug` one from `rails new`) and add `binding.pry` in your Controller code. This way you can pause the Rails request in the terminal, inspect, and type `continue` to let it go and finish rendering the view.

```ruby
# Gemfile

# [...]
group :development, :test do
  # gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]
  gem 'pry-rails'
end
```

## Further suggestions

- To submit a parameter through a form without displaying the corresponding input, you can use a hidden input field `<input type="hidden">`!

## Extra (optional)

Every time a new HTTP request hits your Rails app, it generates a new instance of the controller. This means you cannot store values across requests unless you use a Rails session. A Rails session persists across all requests during a user's session.

Here's how to use a [Rails session](http://guides.rubyonrails.org/action_controller_overview.html#session) to keep track of the total number of games you have played, your average score and other kind of general information.
